require_relative './readable_grammar.rb'
cpp_grammar = Grammar.new(
    name:"C++",
    scope_name: "source.cpp",
    version: "https://github.com/jeff-hykin/cpp-textmate-grammar/blob/master/generate.rb",
    information_for_contributors: [
        "This code was auto generated by a much-more-readble ruby file: https://github.com/jeff-hykin/cpp-textmate-grammar/blob/master/generate.rb",
        "It is a lot easier to modify the ruby file and have it generate the rest of the code",
        "Also the ruby source is very open to merge requests, so please make one if something could be improved",
        "This file essentially an updated/improved fork of the atom syntax https://github.com/atom/language-c/blob/master/grammars/c%2B%2B.cson",
    ],
)

characters_in_template_call = /[\s<>,\w]/
    template_call = newPattern(
        repository_name: 'template_call_innards',
        tag_as: 'meta.template.call',
        match: /</.zeroOrMoreOf(characters_in_template_call).then(/>/).maybe(@spaces),
        includes: [
            :storage_types,
            :constants,
            :scope_resolution,
            newPattern(
                match: /\w+/,
                tag_as: 'storage.type.user-defined'
            ),
            :operators,
            :number_literal,
            :strings,
            newPattern(
                match: /,/,
                tag_as: "punctuation.separator.comma.template.argument"
            )
        ]
    )
thing = /thing1/.then( template_call )
puts thing.to_tag.to_yaml 